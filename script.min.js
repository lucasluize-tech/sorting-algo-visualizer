/** THIS IS A UGLIFIED/MINIFIED VERSION OF THE PAGE! */

/* FOR THE FULL CODE CHECK https://github.com/lucasluize-tech/sorting-algo-visualizer */ 


const bubbleSortButton=document.querySelector("#bubbleSort-button"),mergeSortButton=document.querySelector("#mergeSort-button"),selectionSortButton=document.querySelector("#selectionSort-button"),insertionSortButton=document.querySelector("#insertionSort-button"),quickSortButton=document.querySelector("#quickSort-button"),arrayContainer=document.querySelectorAll(".array-container"),submitForm=document.querySelector("#form"),PAGE_COLOR="#540cee",DELAY_TIME=300;async function start(e,t){switch(console.log(`using ${t} on `+ARRAY),t){case"Bubble Sort":console.log("calling bubble sort..."),await bubbleSort(e,ARRAY);break;case"Selection Sort":console.log("calling selection sort..."),await selectionSort(e,ARRAY);break;case"Merge Sort":console.log("calling merge sort..."),await mergeSortIterative(e,ARRAY);break;case"Insertion Sort":console.log("calling insertion sort..."),await insertionSort(e,ARRAY);break;case"Quick Sort":console.log("calling quick sort..."),await quickSortIterative(e,ARRAY);break;default:console.error("Unknown algorithm: "+t)}}function highlightBars(e,t,r){e=e.querySelectorAll(".bar");void 0!==e[t]&&void 0!==e[r]&&(e[t].style.backgroundColor="#2f6e83",e[r].style.backgroundColor="#b068b0")}function updateBarHeights(e,t,r,o){var a=Math.min(...o),n=Math.max(...o),e=e.querySelectorAll(".bar");void 0!==e[t]&&void 0!==e[r]&&(e[t].style.height=normalizeValue(o[t],a,n,30,70)+"%",e[t].innerHTML=""+o[t],e[r].style.height=normalizeValue(o[r],a,n,30,70)+"%",e[r].innerHTML=""+o[r])}function updateFinal(e,t){var r=e.querySelectorAll(".bar"),o=Math.min(...t),a=Math.max(...t);for(let e=0;e<r.length;e++){var n=normalizeValue(t[e],o,a,30,70);r[e].style.height=n+"%",r[e].innerHTML=""+t[e]}}function resetHighlights(){document.querySelectorAll(".bar").forEach(e=>e.style.backgroundColor=PAGE_COLOR)}async function bubbleSort(r,o){var a,n=o.length;for(let t=0;t<n;t++)for(let e=0;e<n-t-1;e++)highlightBars(r,e,e+1),o[e]>o[e+1]&&(a=o[e],o[e]=o[e+1],o[e+1]=a,console.log(`updating bar heights ${e} `+(e+1)),updateBarHeights(r,e,e+1,o)),await sleep(DELAY_TIME),resetHighlights();return console.log("sorted --\x3e",o),o}function sleep(t){return new Promise(e=>setTimeout(e,t))}async function selectionSort(o,a){var e,n=a.length;for(let r=0;r<n;r++){let t=r;for(let e=r+1;e<n;e++)highlightBars(o,t,e),a[t]>a[e]&&(t=e),await sleep(DELAY_TIME),resetHighlights();t!==r&&(e=a[r],a[r]=a[t],a[t]=e,console.log(`updating bar heights ${r} `+t),updateBarHeights(o,r,t,a))}return updateFinal(o,a),console.log("sorted --\x3e",a),a}async function mergeSortIterative(n,l){var i=l.length;for(let a=1;a<=i-1;a*=2)for(let o=0;o<i-1;o+=2*a){var s=Math.min(o+a-1,i-1),c=Math.min(o+2*a-1,i-1),u=o,h=s,g=h-u+1,d=c-h,y=new Array(g),b=new Array(d);for(let e=0;e<g;e++)y[e]=l[u+e];for(let e=0;e<d;e++)b[e]=l[h+1+e];let e=0,t=0,r=u;for(;e<g&&t<d;)highlightBars(n,r,h+1+t),y[e]<=b[t]?(l[r]=y[e],e++):(l[r]=b[t],t++),await sleep(DELAY_TIME),console.log(`updating bar heights ${r} `+(h+1+t)),updateBarHeights(n,r,h+1+t,l),resetHighlights(),r++;for(;e<g;)l[r]=y[e],e++,r++;for(;t<d;)l[r]=b[t],t++,r++}return updateFinal(n,l),console.log("sorted --\x3e",l),l}async function insertionSort(r,o){var e=o.length;for(let t=1;t<e;t++){var a=o[t];let e=t-1;for(;0<=e&&o[e]>a;)highlightBars(r,e,e+1),o[e+1]=o[e],console.log(`updating bar heights ${e} `+(e+1)),updateBarHeights(r,e,e+1,o),await sleep(200),resetHighlights(),e--;o[e+1]=a,updateFinal(r,o)}return console.log("sorted --\x3e",o),o}async function quickSortIterative(e,t){var r=[];for(r.push(0),r.push(t.length-1);0<r.length;){var o=r.pop(),a=r.pop(),n=await partition(e,t,a,o);a<n-1&&(r.push(a),r.push(n-1)),n+1<o&&(r.push(n+1),r.push(o))}return updateFinal(e,t),console.log("sorted --\x3e",t),t}async function partition(t,r,o,a){var n,l=r[a];let i=o-1;for(let e=o;e<=a-1;e++)highlightBars(t,i,e),r[e]<=l&&(n=r[++i],r[i]=r[e],r[e]=n,console.log(`updating bar heights ${i} `+e),updateBarHeights(t,i,e,r)),await sleep(DELAY_TIME),resetHighlights();o=r[i+1];return r[i+1]=r[a],r[a]=o,updateBarHeights(t,i+1,a,r),i+1}let ARRAY=[],array_copy=[],lastSelected=null;function generateRandomValues(t){for(let e=0;e<t;e++)ARRAY.push(Math.floor(100*Math.random()));array_copy=[...ARRAY]}function normalizeValue(e,t,r,o,a){return(e-t)/(r-t)*(a-o)+o}function generateBarChart(t){var r=document.createElement("div"),o=(r.classList.add("bar-chart"),r.style.height="100%",Math.min(...t)),a=Math.max(...t);for(let e=0;e<t.length;e++){var n=document.createElement("div"),l=normalizeValue(t[e],o,a,30,70);n.classList.add("bar"),n.textContent=t[e],n.style.height=l+"%",r.appendChild(n)}return r}submitForm.addEventListener("submit",function(e){e.preventDefault();var t=document.querySelector(".slider").value;lastSelected===t?e.target.disabled=!0:(lastSelected=t,0<ARRAY.length&&(ARRAY=[]),generateRandomValues(t),console.log(`values ${t}, array `+ARRAY),arrayContainer.forEach(e=>{e.hasChildNodes()&&e.removeChild(e.lastChild),e.appendChild(generateBarChart(ARRAY))})),e.target.disabled=!0,document.querySelector("#message").hidden=!1}),bubbleSortButton.addEventListener("click",async function(){await start(document.querySelector("#bubble-container"),this.value),ARRAY=[...array_copy]}),mergeSortButton.addEventListener("click",async function(){await start(document.querySelector("#merge-container"),this.value),ARRAY=[...array_copy]}),selectionSortButton.addEventListener("click",async function(){await start(document.querySelector("#selection-container"),this.value),ARRAY=[...array_copy]}),insertionSortButton.addEventListener("click",async function(){await start(document.querySelector("#insertion-container"),this.value),ARRAY=[...array_copy]}),quickSortButton.addEventListener("click",async function(){await start(document.querySelector("#quick-container"),this.value),ARRAY=[...array_copy]});